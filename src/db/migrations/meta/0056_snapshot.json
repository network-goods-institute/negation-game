{
  "id": "e1fbe493-9e0f-4009-87b0-394c203d03b8",
  "prevId": "db2a299e-2f65-4650-94a6-32401d6e4d07",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.chats": {
      "name": "chats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "space_id": {
          "name": "space_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "messages": {
          "name": "messages",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'[]'"
        },
        "state_hash": {
          "name": "state_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "graph": {
          "name": "graph",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "is_deleted": {
          "name": "is_deleted",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "is_shared": {
          "name": "is_shared",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "share_id": {
          "name": "share_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "distill_rationale_id": {
          "name": "distill_rationale_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "chats_user_id_users_id_fk": {
          "name": "chats_user_id_users_id_fk",
          "tableFrom": "chats",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "chats_share_id_unique": {
          "name": "chats_share_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "share_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.definitions": {
      "name": "definitions",
      "schema": "",
      "columns": {
        "term": {
          "name": "term",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "definition": {
          "name": "definition",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "definitions_space_spaces_space_id_fk": {
          "name": "definitions_space_spaces_space_id_fk",
          "tableFrom": "definitions",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.doubt_history": {
      "name": "doubt_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "doubt_id": {
          "name": "doubt_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "doubt_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "doubt_history_doubt_idx": {
          "name": "doubt_history_doubt_idx",
          "columns": [
            {
              "expression": "doubt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doubt_history_user_idx": {
          "name": "doubt_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doubt_history_point_idx": {
          "name": "doubt_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doubt_history_negation_idx": {
          "name": "doubt_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "doubt_history_doubt_id_doubts_id_fk": {
          "name": "doubt_history_doubt_id_doubts_id_fk",
          "tableFrom": "doubt_history",
          "tableTo": "doubts",
          "columnsFrom": [
            "doubt_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "doubt_history_user_id_users_id_fk": {
          "name": "doubt_history_user_id_users_id_fk",
          "tableFrom": "doubt_history",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "doubt_history_point_id_points_id_fk": {
          "name": "doubt_history_point_id_points_id_fk",
          "tableFrom": "doubt_history",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "doubt_history_negation_id_points_id_fk": {
          "name": "doubt_history_negation_id_points_id_fk",
          "tableFrom": "doubt_history",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.doubts": {
      "name": "doubts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "last_earnings_at": {
          "name": "last_earnings_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "doubts_user_idx": {
          "name": "doubts_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doubts_point_idx": {
          "name": "doubts_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "doubts_negation_idx": {
          "name": "doubts_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "doubts_user_id_users_id_fk": {
          "name": "doubts_user_id_users_id_fk",
          "tableFrom": "doubts",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "doubts_point_id_points_id_fk": {
          "name": "doubts_point_id_points_id_fk",
          "tableFrom": "doubts",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "doubts_negation_id_points_id_fk": {
          "name": "doubts_negation_id_points_id_fk",
          "tableFrom": "doubts",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_doubt": {
          "name": "unique_doubt",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "point_id",
            "negation_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"doubts\".\"amount\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.embeddings": {
      "name": "embeddings",
      "schema": "",
      "columns": {
        "point_id": {
          "name": "point_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "embedding": {
          "name": "embedding",
          "type": "vector(384)",
          "primaryKey": false,
          "notNull": false
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "embeddings_point_id_points_id_fk": {
          "name": "embeddings_point_id_points_id_fk",
          "tableFrom": "embeddings",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "embeddings_space_spaces_space_id_fk": {
          "name": "embeddings_space_spaces_space_id_fk",
          "tableFrom": "embeddings",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.endorsements": {
      "name": "endorsements",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "cred": {
          "name": "cred",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "endorsements_user_id_index": {
          "name": "endorsements_user_id_index",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "endorsements_point_id_index": {
          "name": "endorsements_point_id_index",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "endorsements_point_id_points_id_fk": {
          "name": "endorsements_point_id_points_id_fk",
          "tableFrom": "endorsements",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "endorsements_user_id_users_id_fk": {
          "name": "endorsements_user_id_users_id_fk",
          "tableFrom": "endorsements",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "endorsements_space_spaces_space_id_fk": {
          "name": "endorsements_space_spaces_space_id_fk",
          "tableFrom": "endorsements",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.negations": {
      "name": "negations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "older_point_id": {
          "name": "older_point_id",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "newer_point_id": {
          "name": "newer_point_id",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "olderPointIndex": {
          "name": "olderPointIndex",
          "columns": [
            {
              "expression": "older_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "newerPointIndex": {
          "name": "newerPointIndex",
          "columns": [
            {
              "expression": "newer_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "negations_older_point_id_points_id_fk": {
          "name": "negations_older_point_id_points_id_fk",
          "tableFrom": "negations",
          "tableTo": "points",
          "columnsFrom": [
            "older_point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "negations_newer_point_id_points_id_fk": {
          "name": "negations_newer_point_id_points_id_fk",
          "tableFrom": "negations",
          "tableTo": "points",
          "columnsFrom": [
            "newer_point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "negations_created_by_users_id_fk": {
          "name": "negations_created_by_users_id_fk",
          "tableFrom": "negations",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "negations_space_spaces_space_id_fk": {
          "name": "negations_space_spaces_space_id_fk",
          "tableFrom": "negations",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uniqueNegation": {
          "name": "uniqueNegation",
          "nullsNotDistinct": false,
          "columns": [
            "older_point_id",
            "newer_point_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "olderPointFirst": {
          "name": "olderPointFirst",
          "value": "\"negations\".\"older_point_id\" < \"negations\".\"newer_point_id\""
        }
      },
      "isRLSEnabled": false
    },
    "public.notification_preferences": {
      "name": "notification_preferences",
      "schema": "",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "endorsement_notifications": {
          "name": "endorsement_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "negation_notifications": {
          "name": "negation_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "restake_notifications": {
          "name": "restake_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "rationale_notifications": {
          "name": "rationale_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "message_notifications": {
          "name": "message_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "scroll_proposal_notifications": {
          "name": "scroll_proposal_notifications",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "digest_frequency": {
          "name": "digest_frequency",
          "type": "digest_frequency",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'daily'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.notifications": {
      "name": "notifications",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "type": {
          "name": "type",
          "type": "notification_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "source_user_id": {
          "name": "source_user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "source_entity_id": {
          "name": "source_entity_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "source_entity_type": {
          "name": "source_entity_type",
          "type": "source_entity_type",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ai_summary": {
          "name": "ai_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "read_at": {
          "name": "read_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.objections": {
      "name": "objections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "objection_point_id": {
          "name": "objection_point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "target_point_id": {
          "name": "target_point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "context_point_id": {
          "name": "context_point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "parent_edge_id": {
          "name": "parent_edge_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "endorsement_id": {
          "name": "endorsement_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "objectionPointIndex": {
          "name": "objectionPointIndex",
          "columns": [
            {
              "expression": "objection_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "targetPointIndex": {
          "name": "targetPointIndex",
          "columns": [
            {
              "expression": "target_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "contextPointIndex": {
          "name": "contextPointIndex",
          "columns": [
            {
              "expression": "context_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "parentEdgeIndex": {
          "name": "parentEdgeIndex",
          "columns": [
            {
              "expression": "parent_edge_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "objections_objection_point_id_points_id_fk": {
          "name": "objections_objection_point_id_points_id_fk",
          "tableFrom": "objections",
          "tableTo": "points",
          "columnsFrom": [
            "objection_point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_target_point_id_points_id_fk": {
          "name": "objections_target_point_id_points_id_fk",
          "tableFrom": "objections",
          "tableTo": "points",
          "columnsFrom": [
            "target_point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_context_point_id_points_id_fk": {
          "name": "objections_context_point_id_points_id_fk",
          "tableFrom": "objections",
          "tableTo": "points",
          "columnsFrom": [
            "context_point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_parent_edge_id_negations_id_fk": {
          "name": "objections_parent_edge_id_negations_id_fk",
          "tableFrom": "objections",
          "tableTo": "negations",
          "columnsFrom": [
            "parent_edge_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_endorsement_id_endorsements_id_fk": {
          "name": "objections_endorsement_id_endorsements_id_fk",
          "tableFrom": "objections",
          "tableTo": "endorsements",
          "columnsFrom": [
            "endorsement_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_created_by_users_id_fk": {
          "name": "objections_created_by_users_id_fk",
          "tableFrom": "objections",
          "tableTo": "users",
          "columnsFrom": [
            "created_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "objections_space_spaces_space_id_fk": {
          "name": "objections_space_spaces_space_id_fk",
          "tableFrom": "objections",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uniqueObjection": {
          "name": "uniqueObjection",
          "nullsNotDistinct": false,
          "columns": [
            "objection_point_id",
            "target_point_id",
            "context_point_id",
            "parent_edge_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.points": {
      "name": "points",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "keywords": {
          "name": "keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "ARRAY[]::text[]"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "is_command": {
          "name": "is_command",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "points_space_spaces_space_id_fk": {
          "name": "points_space_spaces_space_id_fk",
          "tableFrom": "points",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.restake_history": {
      "name": "restake_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "restake_id": {
          "name": "restake_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "restake_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "restake_history_restake_idx": {
          "name": "restake_history_restake_idx",
          "columns": [
            {
              "expression": "restake_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "restake_history_user_idx": {
          "name": "restake_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "restake_history_point_idx": {
          "name": "restake_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "restake_history_negation_idx": {
          "name": "restake_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "restake_history_restake_id_restakes_id_fk": {
          "name": "restake_history_restake_id_restakes_id_fk",
          "tableFrom": "restake_history",
          "tableTo": "restakes",
          "columnsFrom": [
            "restake_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "restake_history_user_id_users_id_fk": {
          "name": "restake_history_user_id_users_id_fk",
          "tableFrom": "restake_history",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "restake_history_point_id_points_id_fk": {
          "name": "restake_history_point_id_points_id_fk",
          "tableFrom": "restake_history",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "restake_history_negation_id_points_id_fk": {
          "name": "restake_history_negation_id_points_id_fk",
          "tableFrom": "restake_history",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.restakes": {
      "name": "restakes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "restakes_user_idx": {
          "name": "restakes_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "restakes_point_idx": {
          "name": "restakes_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "restakes_negation_idx": {
          "name": "restakes_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "restakes_user_id_users_id_fk": {
          "name": "restakes_user_id_users_id_fk",
          "tableFrom": "restakes",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "restakes_point_id_points_id_fk": {
          "name": "restakes_point_id_points_id_fk",
          "tableFrom": "restakes",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "restakes_negation_id_points_id_fk": {
          "name": "restakes_negation_id_points_id_fk",
          "tableFrom": "restakes",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_restake": {
          "name": "unique_restake",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "point_id",
            "negation_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"restakes\".\"amount\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.slash_history": {
      "name": "slash_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "slash_id": {
          "name": "slash_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "slash_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "slash_history_slash_idx": {
          "name": "slash_history_slash_idx",
          "columns": [
            {
              "expression": "slash_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slash_history_user_idx": {
          "name": "slash_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slash_history_point_idx": {
          "name": "slash_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slash_history_negation_idx": {
          "name": "slash_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "slash_history_slash_id_slashes_id_fk": {
          "name": "slash_history_slash_id_slashes_id_fk",
          "tableFrom": "slash_history",
          "tableTo": "slashes",
          "columnsFrom": [
            "slash_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slash_history_user_id_users_id_fk": {
          "name": "slash_history_user_id_users_id_fk",
          "tableFrom": "slash_history",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slash_history_point_id_points_id_fk": {
          "name": "slash_history_point_id_points_id_fk",
          "tableFrom": "slash_history",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slash_history_negation_id_points_id_fk": {
          "name": "slash_history_negation_id_points_id_fk",
          "tableFrom": "slash_history",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.slashes": {
      "name": "slashes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "restake_id": {
          "name": "restake_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "slashes_user_idx": {
          "name": "slashes_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slashes_restake_idx": {
          "name": "slashes_restake_idx",
          "columns": [
            {
              "expression": "restake_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slashes_point_idx": {
          "name": "slashes_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "slashes_negation_idx": {
          "name": "slashes_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "slashes_user_id_users_id_fk": {
          "name": "slashes_user_id_users_id_fk",
          "tableFrom": "slashes",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slashes_restake_id_restakes_id_fk": {
          "name": "slashes_restake_id_restakes_id_fk",
          "tableFrom": "slashes",
          "tableTo": "restakes",
          "columnsFrom": [
            "restake_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slashes_point_id_points_id_fk": {
          "name": "slashes_point_id_points_id_fk",
          "tableFrom": "slashes",
          "tableTo": "points",
          "columnsFrom": [
            "point_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slashes_negation_id_points_id_fk": {
          "name": "slashes_negation_id_points_id_fk",
          "tableFrom": "slashes",
          "tableTo": "points",
          "columnsFrom": [
            "negation_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_slash": {
          "name": "unique_slash",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "restake_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"slashes\".\"amount\" >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.spaces": {
      "name": "spaces",
      "schema": "",
      "columns": {
        "space_id": {
          "name": "space_id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "icon": {
          "name": "icon",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "pinned_point_id": {
          "name": "pinned_point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.topics": {
      "name": "topics",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "discourse_url": {
          "name": "discourse_url",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "topics_space_spaces_space_id_fk": {
          "name": "topics_space_spaces_space_id_fk",
          "tableFrom": "topics",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.translations": {
      "name": "translations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "original_text": {
          "name": "original_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "language": {
          "name": "language",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "translated_text": {
          "name": "translated_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "unique_translation": {
          "name": "unique_translation",
          "columns": [
            {
              "expression": "original_text",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "language",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "cred": {
          "name": "cred",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 500
        },
        "bio": {
          "name": "bio",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "delegation_url": {
          "name": "delegation_url",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "discourse_username": {
          "name": "discourse_username",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "discourse_community_url": {
          "name": "discourse_community_url",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "discourse_consent_given": {
          "name": "discourse_consent_given",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "usernameUniqueIndex": {
          "name": "usernameUniqueIndex",
          "columns": [
            {
              "expression": "lower(\"username\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "noNegativeCred": {
          "name": "noNegativeCred",
          "value": "\"users\".\"cred\" >= 0"
        },
        "usernameFormat": {
          "name": "usernameFormat",
          "value": "LENGTH(\"users\".\"username\") BETWEEN 3 AND 15\n          AND \"users\".\"username\" ~ '^[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9]$'"
        }
      },
      "isRLSEnabled": false
    },
    "public.viewpoint_interactions": {
      "name": "viewpoint_interactions",
      "schema": "",
      "columns": {
        "viewpoint_id": {
          "name": "viewpoint_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "views": {
          "name": "views",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "copies": {
          "name": "copies",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_viewed": {
          "name": "last_viewed",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_updated": {
          "name": "last_updated",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "viewpoint_interactions_viewpoint_id_viewpoints_id_fk": {
          "name": "viewpoint_interactions_viewpoint_id_viewpoints_id_fk",
          "tableFrom": "viewpoint_interactions",
          "tableTo": "viewpoints",
          "columnsFrom": [
            "viewpoint_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "viewpoint_interactions_viewpoint_id_pk": {
          "name": "viewpoint_interactions_viewpoint_id_pk",
          "columns": [
            "viewpoint_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.viewpoints": {
      "name": "viewpoints",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "''"
        },
        "graph": {
          "name": "graph",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_updated_at": {
          "name": "last_updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "views_at_last_update": {
          "name": "views_at_last_update",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "copied_from_id": {
          "name": "copied_from_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "topic_id": {
          "name": "topic_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "viewpoints_space_spaces_space_id_fk": {
          "name": "viewpoints_space_spaces_space_id_fk",
          "tableFrom": "viewpoints",
          "tableTo": "spaces",
          "columnsFrom": [
            "space"
          ],
          "columnsTo": [
            "space_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "viewpoints_copied_from_id_viewpoints_id_fk": {
          "name": "viewpoints_copied_from_id_viewpoints_id_fk",
          "tableFrom": "viewpoints",
          "tableTo": "viewpoints",
          "columnsFrom": [
            "copied_from_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "viewpoints_topic_id_topics_id_fk": {
          "name": "viewpoints_topic_id_topics_id_fk",
          "tableFrom": "viewpoints",
          "tableTo": "topics",
          "columnsFrom": [
            "topic_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {
    "public.digest_frequency": {
      "name": "digest_frequency",
      "schema": "public",
      "values": [
        "none",
        "daily",
        "weekly"
      ]
    },
    "public.doubt_action": {
      "name": "doubt_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "deactivated",
        "reduced_by_slash"
      ]
    },
    "public.notification_type": {
      "name": "notification_type",
      "schema": "public",
      "values": [
        "endorsement",
        "negation",
        "restake",
        "doubt",
        "slash",
        "rationale_mention",
        "message",
        "viewpoint_published",
        "scroll_proposal"
      ]
    },
    "public.restake_action": {
      "name": "restake_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "decreased",
        "deactivated"
      ]
    },
    "public.slash_action": {
      "name": "slash_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "decreased",
        "deactivated"
      ]
    },
    "public.source_entity_type": {
      "name": "source_entity_type",
      "schema": "public",
      "values": [
        "point",
        "rationale",
        "chat",
        "viewpoint",
        "proposal",
        "user"
      ]
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.effective_restakes_view": {
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "definition": "select \"user_id\", \"point_id\", \"negation_id\", \"amount\", \"created_at\", \n        COALESCE((\n          SELECT \"amount\"\n          FROM \"slashes\"\n          WHERE \"restake_id\" = \"id\"\n          AND \"amount\" > 0 \n          AND \"created_at\" > \"created_at\"\n        ), 0)\n       as \"slashed_amount\", \n        COALESCE((\n          SELECT SUM(\"amount\")\n          FROM \"doubts\"\n          WHERE \"point_id\" = \"point_id\"\n          AND \"negation_id\" = \"negation_id\"\n          AND \"created_at\" >= \"created_at\"\n        ), 0)\n       as \"doubted_amount\", \n        GREATEST(0, \"amount\" - \n          COALESCE((\n            SELECT \"amount\"\n            FROM \"slashes\"\n            WHERE \"restake_id\" = \"id\"\n            AND \"amount\" > 0 \n            AND \"created_at\" > \"created_at\"\n          ), 0)\n        )\n       as \"effective_amount\", \n        \"amount\" > COALESCE((\n          SELECT \"amount\"\n          FROM \"slashes\"\n          WHERE \"restake_id\" = \"id\"\n          AND \"amount\" > 0 \n          AND \"created_at\" > \"created_at\"\n        ), 0)\n       as \"available_for_doubts\" from \"restakes\" where \"restakes\".\"amount\" > 0",
      "name": "effective_restakes_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.point_favor_history": {
      "columns": {},
      "definition": "select all_events_with_stats.point_id as \"point_id\", all_events_with_stats.event_type as \"event_type\", all_events_with_stats.event_time as \"event_time\", all_events_with_stats.cred as \"cred\", all_events_with_stats.negations_cred as \"negations_cred\", \n        CASE\n          WHEN all_events_with_stats.cred = 0 THEN 0\n          WHEN all_events_with_stats.negations_cred = 0 THEN 100\n          ELSE FLOOR(\n            100.0 * all_events_with_stats.cred / \n            (all_events_with_stats.cred + all_events_with_stats.negations_cred)\n          ) + GREATEST(0, \n            all_events_with_stats.total_restakes - \n            GREATEST(\n              all_events_with_stats.effective_doubts,\n              all_events_with_stats.total_slashes\n            )\n          )\n        END::integer\n       as \"favor\" from \"all_events_with_stats\" order by event_time, point_id",
      "name": "point_favor_history",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    },
    "public.point_with_details_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "is_command": {
          "name": "is_command",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "definition": "select \"id\", \"content\", \"created_at\", \"created_by\", \"space\", \"is_command\", \n        COALESCE((\n          SELECT COUNT(*)\n          FROM (\n            SELECT older_point_id AS point_id FROM \"negations\"\n            UNION ALL\n            SELECT newer_point_id AS point_id FROM \"negations\"\n          ) sub\n          WHERE point_id = \"points\".id\n        ), 0)\n       as \"amount_negations\", \n        COALESCE((\n          SELECT COUNT(DISTINCT \"user_id\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" = \"points\".id\n        ), 0)\n       as \"amount_supporters\", \n        COALESCE((\n          SELECT SUM(\"cred\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" = \"points\".id\n        ), 0)\n       as \"cred\", \n        COALESCE((\n          SELECT SUM(\"cred\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" IN (\n            SELECT newer_point_id\n            FROM \"negations\"\n            WHERE older_point_id = \"points\".id\n            UNION\n            SELECT older_point_id\n            FROM \"negations\"\n            WHERE newer_point_id = \"points\".id\n          )\n        ), 0)\n       as \"negations_cred\", \n          ARRAY(\n            SELECT older_point_id\n            FROM \"negations\"\n            WHERE newer_point_id = \"points\".id\n            UNION\n            SELECT newer_point_id\n            FROM \"negations\"\n            WHERE older_point_id = \"points\".id\n          )\n         as \"negation_ids\" from \"points\"",
      "name": "point_with_details_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}
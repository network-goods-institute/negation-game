{
  "id": "37796860-f301-40ae-92c6-2c15cd611436",
  "prevId": "cdf49900-fdae-4a7c-b600-6a254153ce51",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.definitions": {
      "name": "definitions",
      "schema": "",
      "columns": {
        "term": {
          "name": "term",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "definition": {
          "name": "definition",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "definitions_space_spaces_space_id_fk": {
          "name": "definitions_space_spaces_space_id_fk",
          "tableFrom": "definitions",
          "columnsFrom": [
            "space"
          ],
          "tableTo": "spaces",
          "columnsTo": [
            "space_id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.doubt_history": {
      "name": "doubt_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "doubt_id": {
          "name": "doubt_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "doubt_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "doubt_history_doubt_idx": {
          "name": "doubt_history_doubt_idx",
          "columns": [
            {
              "expression": "doubt_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "doubt_history_user_idx": {
          "name": "doubt_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "doubt_history_point_idx": {
          "name": "doubt_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "doubt_history_negation_idx": {
          "name": "doubt_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "doubt_history_doubt_id_doubts_id_fk": {
          "name": "doubt_history_doubt_id_doubts_id_fk",
          "tableFrom": "doubt_history",
          "columnsFrom": [
            "doubt_id"
          ],
          "tableTo": "doubts",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "doubt_history_user_id_users_id_fk": {
          "name": "doubt_history_user_id_users_id_fk",
          "tableFrom": "doubt_history",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "doubt_history_point_id_points_id_fk": {
          "name": "doubt_history_point_id_points_id_fk",
          "tableFrom": "doubt_history",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "doubt_history_negation_id_points_id_fk": {
          "name": "doubt_history_negation_id_points_id_fk",
          "tableFrom": "doubt_history",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.doubts": {
      "name": "doubts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "last_earnings_at": {
          "name": "last_earnings_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "doubts_user_idx": {
          "name": "doubts_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "doubts_point_idx": {
          "name": "doubts_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "doubts_negation_idx": {
          "name": "doubts_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "doubts_user_id_users_id_fk": {
          "name": "doubts_user_id_users_id_fk",
          "tableFrom": "doubts",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "doubts_point_id_points_id_fk": {
          "name": "doubts_point_id_points_id_fk",
          "tableFrom": "doubts",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "doubts_negation_id_points_id_fk": {
          "name": "doubts_negation_id_points_id_fk",
          "tableFrom": "doubts",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_doubt": {
          "name": "unique_doubt",
          "columns": [
            "user_id",
            "point_id",
            "negation_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"doubts\".\"amount\" >= 0"
        }
      }
    },
    "public.embeddings": {
      "name": "embeddings",
      "schema": "",
      "columns": {
        "point_id": {
          "name": "point_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "embedding": {
          "name": "embedding",
          "type": "vector(384)",
          "primaryKey": false,
          "notNull": false
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "embeddings_point_id_points_id_fk": {
          "name": "embeddings_point_id_points_id_fk",
          "tableFrom": "embeddings",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "embeddings_space_spaces_space_id_fk": {
          "name": "embeddings_space_spaces_space_id_fk",
          "tableFrom": "embeddings",
          "columnsFrom": [
            "space"
          ],
          "tableTo": "spaces",
          "columnsTo": [
            "space_id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.endorsements": {
      "name": "endorsements",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "cred": {
          "name": "cred",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "indexes": {
        "endorsements_user_id_index": {
          "name": "endorsements_user_id_index",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "endorsements_point_id_index": {
          "name": "endorsements_point_id_index",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "endorsements_point_id_points_id_fk": {
          "name": "endorsements_point_id_points_id_fk",
          "tableFrom": "endorsements",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "endorsements_user_id_users_id_fk": {
          "name": "endorsements_user_id_users_id_fk",
          "tableFrom": "endorsements",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "endorsements_space_spaces_space_id_fk": {
          "name": "endorsements_space_spaces_space_id_fk",
          "tableFrom": "endorsements",
          "columnsFrom": [
            "space"
          ],
          "tableTo": "spaces",
          "columnsTo": [
            "space_id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.negations": {
      "name": "negations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "older_point_id": {
          "name": "older_point_id",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "newer_point_id": {
          "name": "newer_point_id",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "indexes": {
        "olderPointIndex": {
          "name": "olderPointIndex",
          "columns": [
            {
              "expression": "older_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "newerPointIndex": {
          "name": "newerPointIndex",
          "columns": [
            {
              "expression": "newer_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "negations_older_point_id_points_id_fk": {
          "name": "negations_older_point_id_points_id_fk",
          "tableFrom": "negations",
          "columnsFrom": [
            "older_point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "negations_newer_point_id_points_id_fk": {
          "name": "negations_newer_point_id_points_id_fk",
          "tableFrom": "negations",
          "columnsFrom": [
            "newer_point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "negations_created_by_users_id_fk": {
          "name": "negations_created_by_users_id_fk",
          "tableFrom": "negations",
          "columnsFrom": [
            "created_by"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "negations_space_spaces_space_id_fk": {
          "name": "negations_space_spaces_space_id_fk",
          "tableFrom": "negations",
          "columnsFrom": [
            "space"
          ],
          "tableTo": "spaces",
          "columnsTo": [
            "space_id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uniqueNegation": {
          "name": "uniqueNegation",
          "columns": [
            "older_point_id",
            "newer_point_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "checkConstraints": {
        "olderPointFirst": {
          "name": "olderPointFirst",
          "value": "\"negations\".\"older_point_id\" < \"negations\".\"newer_point_id\""
        }
      }
    },
    "public.points": {
      "name": "points",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "keywords": {
          "name": "keywords",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "ARRAY[]::text[]"
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "points_space_spaces_space_id_fk": {
          "name": "points_space_spaces_space_id_fk",
          "tableFrom": "points",
          "columnsFrom": [
            "space"
          ],
          "tableTo": "spaces",
          "columnsTo": [
            "space_id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.restake_history": {
      "name": "restake_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "restake_id": {
          "name": "restake_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "restake_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "restake_history_restake_idx": {
          "name": "restake_history_restake_idx",
          "columns": [
            {
              "expression": "restake_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "restake_history_user_idx": {
          "name": "restake_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "restake_history_point_idx": {
          "name": "restake_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "restake_history_negation_idx": {
          "name": "restake_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "restake_history_restake_id_restakes_id_fk": {
          "name": "restake_history_restake_id_restakes_id_fk",
          "tableFrom": "restake_history",
          "columnsFrom": [
            "restake_id"
          ],
          "tableTo": "restakes",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "restake_history_user_id_users_id_fk": {
          "name": "restake_history_user_id_users_id_fk",
          "tableFrom": "restake_history",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "restake_history_point_id_points_id_fk": {
          "name": "restake_history_point_id_points_id_fk",
          "tableFrom": "restake_history",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "restake_history_negation_id_points_id_fk": {
          "name": "restake_history_negation_id_points_id_fk",
          "tableFrom": "restake_history",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.restakes": {
      "name": "restakes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "restakes_user_idx": {
          "name": "restakes_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "restakes_point_idx": {
          "name": "restakes_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "restakes_negation_idx": {
          "name": "restakes_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "restakes_user_id_users_id_fk": {
          "name": "restakes_user_id_users_id_fk",
          "tableFrom": "restakes",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "restakes_point_id_points_id_fk": {
          "name": "restakes_point_id_points_id_fk",
          "tableFrom": "restakes",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "restakes_negation_id_points_id_fk": {
          "name": "restakes_negation_id_points_id_fk",
          "tableFrom": "restakes",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_restake": {
          "name": "unique_restake",
          "columns": [
            "user_id",
            "point_id",
            "negation_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"restakes\".\"amount\" >= 0"
        }
      }
    },
    "public.slash_history": {
      "name": "slash_history",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "slash_id": {
          "name": "slash_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "action": {
          "name": "action",
          "type": "slash_action",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "previous_amount": {
          "name": "previous_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "new_amount": {
          "name": "new_amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "slash_history_slash_idx": {
          "name": "slash_history_slash_idx",
          "columns": [
            {
              "expression": "slash_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slash_history_user_idx": {
          "name": "slash_history_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slash_history_point_idx": {
          "name": "slash_history_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slash_history_negation_idx": {
          "name": "slash_history_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "slash_history_slash_id_slashes_id_fk": {
          "name": "slash_history_slash_id_slashes_id_fk",
          "tableFrom": "slash_history",
          "columnsFrom": [
            "slash_id"
          ],
          "tableTo": "slashes",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slash_history_user_id_users_id_fk": {
          "name": "slash_history_user_id_users_id_fk",
          "tableFrom": "slash_history",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slash_history_point_id_points_id_fk": {
          "name": "slash_history_point_id_points_id_fk",
          "tableFrom": "slash_history",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slash_history_negation_id_points_id_fk": {
          "name": "slash_history_negation_id_points_id_fk",
          "tableFrom": "slash_history",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.slashes": {
      "name": "slashes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "restake_id": {
          "name": "restake_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "slashes_user_idx": {
          "name": "slashes_user_idx",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slashes_restake_idx": {
          "name": "slashes_restake_idx",
          "columns": [
            {
              "expression": "restake_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slashes_point_idx": {
          "name": "slashes_point_idx",
          "columns": [
            {
              "expression": "point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        },
        "slashes_negation_idx": {
          "name": "slashes_negation_idx",
          "columns": [
            {
              "expression": "negation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {
        "slashes_user_id_users_id_fk": {
          "name": "slashes_user_id_users_id_fk",
          "tableFrom": "slashes",
          "columnsFrom": [
            "user_id"
          ],
          "tableTo": "users",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slashes_restake_id_restakes_id_fk": {
          "name": "slashes_restake_id_restakes_id_fk",
          "tableFrom": "slashes",
          "columnsFrom": [
            "restake_id"
          ],
          "tableTo": "restakes",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slashes_point_id_points_id_fk": {
          "name": "slashes_point_id_points_id_fk",
          "tableFrom": "slashes",
          "columnsFrom": [
            "point_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        },
        "slashes_negation_id_points_id_fk": {
          "name": "slashes_negation_id_points_id_fk",
          "tableFrom": "slashes",
          "columnsFrom": [
            "negation_id"
          ],
          "tableTo": "points",
          "columnsTo": [
            "id"
          ],
          "onUpdate": "no action",
          "onDelete": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_slash": {
          "name": "unique_slash",
          "columns": [
            "user_id",
            "restake_id"
          ],
          "nullsNotDistinct": false
        }
      },
      "checkConstraints": {
        "amount_non_negative_constraint": {
          "name": "amount_non_negative_constraint",
          "value": "\"slashes\".\"amount\" >= 0"
        }
      }
    },
    "public.spaces": {
      "name": "spaces",
      "schema": "",
      "columns": {
        "space_id": {
          "name": "space_id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "icon": {
          "name": "icon",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {}
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "varchar",
          "primaryKey": true,
          "notNull": true
        },
        "username": {
          "name": "username",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "cred": {
          "name": "cred",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 500
        }
      },
      "indexes": {
        "usernameUniqueIndex": {
          "name": "usernameUniqueIndex",
          "columns": [
            {
              "expression": "lower(\"username\")",
              "isExpression": true,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "with": {},
          "method": "btree",
          "concurrently": false
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "noNegativeCred": {
          "name": "noNegativeCred",
          "value": "\"users\".\"cred\" >= 0"
        },
        "usernameFormat": {
          "name": "usernameFormat",
          "value": "LENGTH(\"users\".\"username\") BETWEEN 3 AND 15\n          AND \"users\".\"username\" ~ '^[a-zA-Z0-9][_a-zA-Z0-9]*[a-zA-Z0-9]$'"
        }
      }
    }
  },
  "enums": {
    "public.doubt_action": {
      "name": "doubt_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "deactivated",
        "reduced_by_slash"
      ]
    },
    "public.restake_action": {
      "name": "restake_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "decreased",
        "deactivated"
      ]
    },
    "public.slash_action": {
      "name": "slash_action",
      "schema": "public",
      "values": [
        "created",
        "increased",
        "decreased",
        "deactivated"
      ]
    }
  },
  "schemas": {},
  "views": {
    "public.effective_restakes_view": {
      "name": "effective_restakes_view",
      "schema": "public",
      "columns": {
        "user_id": {
          "name": "user_id",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "point_id": {
          "name": "point_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "negation_id": {
          "name": "negation_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        }
      },
      "definition": "select \"user_id\", \"point_id\", \"negation_id\", \"amount\", \n        COALESCE((\n          SELECT \"amount\"\n          FROM \"slashes\"\n          WHERE \"restake_id\" = \"id\"\n          AND \"amount\" > 0 \n          AND \"created_at\" > \"created_at\"\n        ), 0)\n       as \"slashed_amount\", \n        COALESCE((\n          SELECT SUM(\"amount\")\n          FROM \"doubts\"\n          WHERE \"point_id\" = \"point_id\"\n          AND \"negation_id\" = \"negation_id\"\n        ), 0)\n       as \"doubted_amount\", \n        GREATEST(0, \"amount\" - \n          COALESCE((\n            SELECT \"amount\"\n            FROM \"slashes\"\n            WHERE \"restake_id\" = \"id\"\n            AND \"amount\" > 0 \n            AND \"created_at\" > \"created_at\"\n          ), 0)\n        )\n       as \"effective_amount\" from \"restakes\" where \"restakes\".\"amount\" > 0",
      "materialized": false,
      "isExisting": false
    },
    "public.point_favor_history": {
      "name": "point_favor_history",
      "schema": "public",
      "columns": {},
      "definition": "select all_events_with_stats.point_id as \"point_id\", all_events_with_stats.event_type as \"event_type\", all_events_with_stats.event_time as \"event_time\", all_events_with_stats.cred as \"cred\", all_events_with_stats.negations_cred as \"negations_cred\", \n        CASE\n          WHEN all_events_with_stats.cred = 0 THEN 0\n          WHEN all_events_with_stats.negations_cred = 0 THEN 100\n          ELSE FLOOR(\n            100.0 * all_events_with_stats.cred / \n            (all_events_with_stats.cred + all_events_with_stats.negations_cred)\n          ) + GREATEST(0, \n            all_events_with_stats.total_restakes - \n            GREATEST(\n              all_events_with_stats.effective_doubts,\n              all_events_with_stats.total_slashes\n            )\n          )\n        END::integer\n       as \"favor\" from \"all_events_with_stats\" order by event_time, point_id",
      "materialized": false,
      "isExisting": false
    },
    "public.point_with_details_view": {
      "name": "point_with_details_view",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "varchar",
          "primaryKey": false,
          "notNull": true
        },
        "space": {
          "name": "space",
          "type": "varchar",
          "primaryKey": false,
          "notNull": false,
          "default": "'global'"
        }
      },
      "definition": "select \"id\", \"content\", \"created_at\", \"created_by\", \"space\", \n        COALESCE((\n          SELECT COUNT(*)\n          FROM (\n            SELECT older_point_id AS point_id FROM \"negations\"\n            UNION ALL\n            SELECT newer_point_id AS point_id FROM \"negations\"\n          ) sub\n          WHERE point_id = \"points\".id\n        ), 0)\n       as \"amount_negations\", \n        COALESCE((\n          SELECT COUNT(DISTINCT \"user_id\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" = \"points\".id\n        ), 0)\n       as \"amount_supporters\", \n        COALESCE((\n          SELECT SUM(\"cred\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" = \"points\".id\n        ), 0)\n       as \"cred\", \n        COALESCE((\n          SELECT SUM(\"cred\")\n          FROM \"endorsements\"\n          WHERE \"point_id\" IN (\n            SELECT newer_point_id\n            FROM \"negations\"\n            WHERE older_point_id = \"points\".id\n            UNION\n            SELECT older_point_id\n            FROM \"negations\"\n            WHERE newer_point_id = \"points\".id\n          )\n        ), 0)\n       as \"negations_cred\", \n          ARRAY(\n            SELECT older_point_id\n            FROM \"negations\"\n            WHERE newer_point_id = \"points\".id\n            UNION\n            SELECT newer_point_id\n            FROM \"negations\"\n            WHERE older_point_id = \"points\".id\n          )\n         as \"negation_ids\" from \"points\"",
      "materialized": false,
      "isExisting": false
    }
  },
  "sequences": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}